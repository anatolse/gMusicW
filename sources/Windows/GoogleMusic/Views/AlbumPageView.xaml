<googleMusic:DataPageViewBase
    x:Class="OutcoldSolutions.GoogleMusic.Views.AlbumPageView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:googleMusic="using:OutcoldSolutions.GoogleMusic" 
    xmlns:controls="using:OutcoldSolutions.GoogleMusic.Controls"
    xmlns:telerikGrid="using:Telerik.UI.Xaml.Controls.Grid"
    xmlns:gridPrimitives="using:Telerik.UI.Xaml.Controls.Grid.Primitives"
    mc:Ignorable="d"
    d:DesignHeight="300"
    d:DesignWidth="400">
    
    <Grid Margin="120, 0, 20, 0">
        <Grid.RowDefinitions>
            <RowDefinition Height="100" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="140" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        
        <Grid VerticalAlignment="Bottom" HorizontalAlignment="Left" Grid.ColumnSpan="2"
              Visibility="{Binding Path=IsDataLoading, Converter={StaticResource BooleanToInvisibilityConverter}}" >
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <TextBlock Style="{StaticResource HeaderTextStyle}" 
                       Text="{Binding Path=BindingModel.Playlist.Title, Mode=OneWay}" 
                       VerticalAlignment="Bottom" 
                       TextWrapping="NoWrap" 
                       TextTrimming="WordEllipsis" />

            <TextBlock Style="{StaticResource SubheaderTextStyle}" Grid.Column="1" VerticalAlignment="Bottom" Margin="20, 0, 0, 0" Text="Album"/>
        </Grid>

        <ProgressRing IsActive="{Binding Path=IsDataLoading, Mode=OneWay}" Grid.RowSpan="2" Grid.ColumnSpan="3" />

        <StackPanel Grid.Row="1" Grid.Column="0"
                    Visibility="{Binding Path=IsDataLoading, Converter={StaticResource BooleanToInvisibilityConverter}}" >

            <Image 
               Margin="12, 32, 12, 32" 
               Height="116" 
               Width="116" 
               Source="{Binding Path=BindingModel.Playlist.AlbumArtUrl, Converter={StaticResource AlbumArtUrlToImageConverter}, ConverterParameter=116, Mode=OneWay}"
               Stretch="None"/>

            <TextBlock Style="{StaticResource TitleTextStyle}" Text="{Binding Path=BindingModel.Playlist.Title, Mode=OneWay}" TextWrapping="Wrap" TextTrimming="WordEllipsis" />
            <TextBlock Style="{StaticResource SubtitleTextStyle}" Margin="0, 7, 0, 0" Text="{Binding Path=BindingModel.Playlist.Artist, Mode=OneWay}"  TextWrapping="Wrap" TextTrimming="WordEllipsis" />
            <TextBlock Style="{StaticResource SubtitleTextStyle}" Margin="0, 14, 0, 0" Text="{Binding Path=BindingModel.Playlist.Year, Mode=OneWay}" />
            <TextBlock Style="{StaticResource SubtitleTextStyle}" Margin="0, 7, 0, 0" Text="{Binding Path=BindingModel.Playlist.Genre, Mode=OneWay}" />

            <StackPanel Orientation="Horizontal" Margin="0, 7, 0, 0">
                <TextBlock Style="{StaticResource TitleTextStyle}" Text="Songs: " />
                <TextBlock Style="{StaticResource SubtitleTextStyle}" Margin="7, 0, 0, 0" Text="{Binding Path=BindingModel.Playlist.Songs.Count, Mode=OneWay}" />
            </StackPanel>

            <StackPanel Orientation="Horizontal" Margin="0, 7, 0, 0">
                <TextBlock Style="{StaticResource TitleTextStyle}" Text="Duration: " />
                <TextBlock Style="{StaticResource SubtitleTextStyle}" Margin="7, 0, 0, 0" Text="{Binding Path=BindingModel.Playlist.Duration, Converter={StaticResource DoubleToTimeConverter}, Mode=OneWay}" />
            </StackPanel>

        </StackPanel>

        <telerikGrid:RadDataGrid Grid.Row="1" 
                                 Grid.Column="1"
                                 Visibility="{Binding Path=IsDataLoading, Mode=OneWay, Converter={StaticResource BooleanToInvisibilityConverter}}"
                                 x:Name="DataGrid"
                                 AutoGenerateColumns="False"
                                 HorizontalAlignment="Stretch"
                                 VerticalAlignment="Top"
                                 UserSortMode="Single"
                                 SelectionMode="Single"
                                 SelectionChanged="DataGrid_OnSelectionChanged"
                                 DoubleTapped="DataGrid_OnDoubleTapped"
                                 Margin="40, 20, 20, 20"
                                 GridLinesVisibility="Horizontal"
                                 HorizontalContentAlignment="Stretch"
                                 VerticalContentAlignment="Center"
                                 BorderThickness="0">
            <telerikGrid:RadDataGrid.Columns>
                <telerikGrid:DataGridTemplateColumn Width="45" SizeMode="Fixed" >
                    <telerikGrid:DataGridTemplateColumn.CellContentTemplate>
                        <DataTemplate>
                            <TextBlock VerticalAlignment="Center"
                                       TextAlignment="Center"
                                       Text="{StaticResource PlayingGlyph}" 
                                       FontFamily="Segoe UI Symbol" 
                                       Visibility="{Binding Path=IsPlaying, Mode=OneWay, Converter={StaticResource BooleanToVisibilityConverter}}"
                                       Width="45"/>
                        </DataTemplate>
                    </telerikGrid:DataGridTemplateColumn.CellContentTemplate>
                </telerikGrid:DataGridTemplateColumn>
                <telerikGrid:DataGridTextColumn PropertyName="Track" Header=" " SizeMode="Fixed" Width="40" >
                    <telerikGrid:DataGridTextColumn.CellContentStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="TextAlignment" Value="Right" />
                            <Setter Property="VerticalAlignment" Value="Center" />
                        </Style>
                    </telerikGrid:DataGridTextColumn.CellContentStyle>
                </telerikGrid:DataGridTextColumn>
                <telerikGrid:DataGridTextColumn PropertyName="Title" Header="name" SizeMode="Stretch"  >
                    <telerikGrid:DataGridTextColumn.CellContentStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Left" />
                            <Setter Property="VerticalAlignment" Value="Center" />
                            <Setter Property="Margin" Value="10, 0, 0, 0" />
                        </Style>
                    </telerikGrid:DataGridTextColumn.CellContentStyle>
                </telerikGrid:DataGridTextColumn>
                <telerikGrid:DataGridTemplateColumn Header="     time" SizeMode="Fixed" Width="80" >
                    <telerikGrid:DataGridTemplateColumn.CellContentTemplate>
                        <DataTemplate>
                            <TextBlock VerticalAlignment="Center"
                                       TextAlignment="Right"
                                       Text="{Binding Path=Duration, Mode=OneTime, Converter={StaticResource DoubleToTimeConverter}}" 
                                       Width="60"/>
                        </DataTemplate>
                    </telerikGrid:DataGridTemplateColumn.CellContentTemplate>
                </telerikGrid:DataGridTemplateColumn>
                <telerikGrid:DataGridTextColumn PropertyName="Artist" Header="artist" SizeMode="Stretch" >
                    <telerikGrid:DataGridTextColumn.CellContentStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Left" />
                            <Setter Property="VerticalAlignment" Value="Center" />
                            <Setter Property="Margin" Value="10, 0, 0, 0" />
                        </Style>
                    </telerikGrid:DataGridTextColumn.CellContentStyle>
                </telerikGrid:DataGridTextColumn>
                <telerikGrid:DataGridTextColumn PropertyName="PlayCount" Header="plays" SizeMode="Fixed" Width="60" >
                    <telerikGrid:DataGridTextColumn.CellContentStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Right" />
                            <Setter Property="VerticalAlignment" Value="Center" />
                            <Setter Property="TextAlignment" Value="Right" />
                            <Setter Property="Width" Value="40" />
                        </Style>
                    </telerikGrid:DataGridTextColumn.CellContentStyle>
                </telerikGrid:DataGridTextColumn>
                <telerikGrid:DataGridTemplateColumn Header="rating" Width="130" SizeMode="Fixed"  >
                    <telerikGrid:DataGridTemplateColumn.CellContentTemplate>
                        <DataTemplate>
                            <controls:Rating Margin="10, 0, 0, 0" VerticalAlignment="Center" Value="{Binding Path=Rating, Mode=OneWay}" HorizontalAlignment="Right"
                                             Command="{Binding Path=DataContext.RateSongCommand, ElementName=ListView, Mode=OneTime}"
                                             CommandParameter="{Binding Mode=OneTime}"
                                             Height="35"/>
                        </DataTemplate>
                    </telerikGrid:DataGridTemplateColumn.CellContentTemplate>
                </telerikGrid:DataGridTemplateColumn>
            </telerikGrid:RadDataGrid.Columns>

        </telerikGrid:RadDataGrid>
    </Grid>
</googleMusic:DataPageViewBase>
